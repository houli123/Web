# 矩阵

## 1-矩阵的类型
GLSL ES 支持2、3、4维矩阵：
mat2
mat3
mat4
矩阵中的元素都是浮点型。

## 2-矩阵的建立
GLSL ES 中的矩阵是列主序的，在建立矩阵的时候，其参数结构有很多种。

(1)浮点数，其参数是按照列主序排列的。
```gl
mat4 m=mat4(
    1,5,9,13,
    2,6,10,14,
    3,7,11,15,
    4,8,12,16
);
/*
    1,5,9,13,
    2,6,10,14,
    3,7,11,15,
    4,8,12,16
*/

```

(2)向量
```gl
vec4 v4_1=vec4(1,2,3,4);
vec4 v4_2=vec4(5,6,7,8);
vec4 v4_3=vec4(9,10,11,12);
vec4 v4_4=vec4(13,14,15,16);
mat4 m=mat4(v4_1,v4_2,v4_3,v4_4);
/*
[
    1,2,3,4,
    5,6,7,8,
    9,10,11,12,
    13,14,15,16
]    
*/
```

(3)浮点+向量
```gl
vec4 v4_1=vec4(1,5,9,13);
vec4 v4_2=vec4(2,6,10,14);
mat4 m=mat4(
    v4_1,
    v4_2,
    3,7,11,15,
    4,8,12,16
);
/*
    1,5,9,13,
    2,6,10,14,
    3,7,11,15,
    4,8,12,16   
*/
```

(4)单个浮点数
```gl
mat4 m=mat4(1);
/*
[
    1, 0, 0, 0,
    0, 1, 0, 0,
    0, 0, 1, 0,
    0, 0, 0, 1,
]    
*/
```

注：如矩阵中的参数数量大于1，小于矩阵元素数量，会报错
```gl
mat4 m4 = mat4(1.0,2.0); /*报错*/
```

## 3-矩阵的访问
(1)使用[] 可以访问矩阵的某一行。
```gl
mat4 m=mat4(
    1,5,9,13,
    2,6,10,14,
    3,7,11,15,
    4,8,12,16
);
m[0]
/*
    1,5,9,13,
*/
```

(2)使用 m[y][x] 方法，可以访问矩阵第y行，第x列的元素。
```gl
mat4 m=mat4(
    1,5,9,13,
    2,6,10,14,
    3,7,11,15,
    4,8,12,16
);
m[0][0]
/* 1 */
```

(3).m[y] 可以理解为一个向量，其内部的元素，可以像访问向量元素一样去访问。
```gl
mat4 m=mat4(
    1,5,9,13,
    2,6,10,14,
    3,7,11,15,
    4,8,12,16
);
m[0].[0] //1
m[0].x //1
m[0].r //1
m[0].s //1
```
注：我们在此要注意一下[] 中索引值的限制。

[] 中的索引值只能通过以下方式定义：
整形字面量，如0，1，2，3
```gl
m[0]
m[1]
```
用const 修饰的变量
```gl
const int y=0;
m[y];
```
注：以下写法是错误的
```gl
int y=0;
m[y];
```
循环索引
```gl
mat4 n=mat4(
    1,5,9,13,
    2,6,10,14,
    3,7,11,15,
    4,8,12,16
);
mat4 m=mat4(1);
void main(){
    for(int i=0;i<4;i++){
        m[i]=n[i];
    }
    ……
}
```
前面三项组成的表达式
```gl
const int y=0;
m[y+1];
```




